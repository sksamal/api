<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<title>CSIWS Web Services Query Builder</title>
	<link rel="stylesheet" type="text/css" href="./csiws/jquery-ui.css">
	<link rel="stylesheet" type="text/css" href="./csiws/CSIS_Builder.css">
	<script type="text/javascript" src="./csiws/jquery.min.js.download"></script>
	<script type="text/javascript" src="./csiws/jquery-migrate-1.2.1.min.js.download"></script>
	<script type="text/javascript" src="./csiws/jquery-ui.min.js.download"></script>
	<script type="text/javascript" src="./csiws/date.min.js.download"></script>
	<script type="text/javascript" src="./csiws/json2.min.js.download"></script>
	<script type="text/javascript" src="./csiws/jquery.CSIS-buttonBar.js.download"></script>
	<noscript>
		<style type="text/css">
			.pagecontainer {display:none;}
		</style>
		<div class="noscriptmsg">
		It appears you don't have JavaScript enabled.  Please turn on JavaScript to use this site.
		</div>
	</noscript>
	<script type="text/javascript">
		//var serverUrl = "http://data" +
		//	(window.location.hash.length > 1 ? "." + window.location.hash.slice(1) : "") +
		//	".rcc-CSIS.org/";
		var serverUrl = "http://hprcc-agron0.unl.edu/cornsoywater/public_html/api/weather/index.php?";
		function makeList(x) {
			var l = [];
			$(x.split(",")).each(function (i, e) {
				l.push(parseFloat(e.replace(/[^\d\-\.]/g, '')));
			});
			return l;
		}
		function makeObject(items) {
			var newObj = {};
			$.each(items, function (i, j) {
				if (j[1]) {
					newObj[j[0]] = j[1];
				}
			});
			return newObj;
		}
		function table_events(ttype, input_name, table) {
			$("#specs")
				.off("focusin focusout", ttype + "[name=" + input_name + "]")
				// need to delay show/hide to allow time for click event to fire
				.on("focusin", ttype + "[name=" + input_name + "]", function () {
					setTimeout(function () {
						$("#" + table).show();
					}, 200);
				})
				.on("focusout", ttype + "[name=" + input_name + "]", function () {
					setTimeout(function () {
						$("#" + table).hide();
					}, 200);
				});
		}
		function process_request(params) {
			var xdr, res,
				args = JSON.stringify(params),
				server = serverUrl + $("#wstype input:checked").val(),
				postSuccess = function (res) {
					if (params.output && params.output.toLowerCase() === "csv") {
						$("#jresults_h2 span").html('Results (CSV)');
						$("#jresults").empty().html("<pre>" + res + "<\/pre>");
					} else {
						$("#jresults_h2 span").html('Results (JSON)');
						$("#jresults").empty().html("<pre>" + JSON.stringify(res) + "<\/pre>");
						$("#formatButton").text("Format").show().off("click").on("click", function () {
							$(this).hide();
							if ($(this).text() === "Format") {
								$("#jresults_h2 span").html('Results (formatted)');
								$("#jresults").empty();
								$.each(res, function (key, val) {
									$("#jresults").append("<pre>" + key + ":<\/pre>");
									if (key === "data" && typeof val === "string" && val.search("image/png;base64") >= 0) {
										$("#jresults").append("<img src='" + val + "'><\/img>");
									} else {
										$(val).each(function (i, elem) {
											$("#jresults").append("<pre>" + JSON.stringify(elem) + "<\/pre>");
										});
									}
								});
								$(this).text("Back to raw").show();
							} else {
								$("#jresults_h2 span").html('Results (JSON)');
								$("#jresults").empty().html("<pre>" + JSON.stringify(res) + "<\/pre>");
								$(this).text("Format").show();
							}
						});
					}
				},
				postError = function (xhr, textStatus, error) {
    				$("#jresults").empty().html("<p>Web services call failed: " + error + "</p>");
				};
			$("#jparams_h2").html('Parameters (JSON)');
			$("#jparams").empty().html("<pre>" + args + "<\/pre>");
			$("#jresults_h2 span").html('Results');
			$('#jresults').empty().html('Loading...');
			$("#formatButton").hide();
			$("#output").show();
			if (server.search("General") >= 0) {
				server += $("select[name=area] :selected").text();
				$("#jparams pre").prepend("Server=/General/" + $('select[name=area] :selected').text() + "&nbsp;&nbsp;&nbsp;params=");
			}
			if (params.output && params.output.toLowerCase() === "image") {
				$("#jresults_h2 span").html('Results (PNG)');
				$("#jresults").empty().html("<img src='" + server + "?params=" + args + "'><\/img>");
			} else {
				 if (window.XDomainRequest) {
					xdr = new XDomainRequest();
					xdr.open("GET", server + "?params=" + args);
					xdr.onload = function () {
						res = $.parseJSON(xdr.responseText);
						postSuccess(results);
					};
					xdr.onerror = postError;
					xdr.onprogress = function () { };
					xdr.ontimeout = function () { };
					setTimeout(function () {
						xdr.send();
					}, 0);
				} else {
					$.ajax(server, {
						type: 'POST',
						data: {params: args},
                        //data: {args},
						dataType: 'json', //params.output && params.output.toLowerCase() === "csv" ? 'text' : 'json',
						crossDamain: true,
						success: postSuccess,
						error: postError
					});
				}
			}
			$("#jparams").one("keyup", function () {
				if (server.search("General") < 0) {
					$("#jparams_h2").html('Parameters (JSON) <button id="submitJson" class="otherButtons ui-corner-all ui-state-default">Submit</button>');
					$("#specs input,textarea,button").attr("disabled", true).addClass("grayout");
					$("#submitJson").attr("disabled", false).on("click", function () {
						$("#specs input,textarea,button").attr("disabled", false).removeClass("grayout");
						process_request(JSON.parse($("#jparams").text()));
					});
				}
			});
		}
		function collect_data() {
			var params = {}, img_obj = {};
			$('#specs input').not(".elems_opts input").not(".image_opts input").each(function () {
				if (this.name.length && this.value.length) {
					params[this.name] = this.value.replace(/,\s/g, ",").toLowerCase();
				}
			});
			if ($("textarea[name=elems_container]").is(":visible") && $("textarea[name=elems_container]").val().length) {
				params.elems = JSON.parse($("textarea[name=elems_container]").val());
			}
			if ($("#showimgopts").length && $("#showimgopts").is(":checked")) {
				$('.image_opts input').each(function () {
					if (this.name.length && this.value.length) {
						if (this.name === 'levels') {
							img_obj.levels = makeList(this.value);
						} else if ($.isNumeric(this.value)) {
							img_obj[this.name] = parseInt(this.value, 10);
						} else {
							img_obj[this.name] = this.value.replace(/,\s/g, ",");
						}
					}
				});
				params.image = img_obj;
			}
			if (params.meta && params.meta.search('valid_daterange') >= 0 && !params.elems) {
				alert("Need to specify elements when requesting valid_daterange");
				$("[name=elems]").addClass("makeRequired").effect("highlight", {color: "yellow"}, 1000).focus();
				return false;
			}
			if ($("#singledate").is(":checked")) {
				params.date = params.sdate;
				delete params.sdate;
				delete params.edate;
			}
			process_request(params);
		}
		function add_element_interaction() {
			var single_elem, elem_list, combo_list;
			$("#add_elem").button().on("click", function () {
				if ($("input[name=duration]").val().search(/std/i) >= 0 && $("input[name=season_start]").val().length === 0) {
					if ($("input[name=interval]").val().search(/dly/i) >= 0) {
						alert("For dly season-to-date, need to specify a season start in the form mm-dd");
					} else {
						alert("For mly season-to-date, need to specify a season start in the form mm");
					}
					$("[name=season_start]").effect("highlight", {color: "yellow"}, 1000).focus();
					return false;
				}
				if ($("input[name=duration]").val().length && $("input[name=duration]").val().search(/dly/i) < 0 && $("input[name=duration]").val() !== "1" && $("input[name=reduce]").val().length === 0) {
					alert("For this duration, need to specify a reduction");
					$("[name=reduce]").effect("highlight", {color: "yellow"}, 1000).focus();
					return false;
				}
				if ($("input[name=duration]").val().search(/std/i) >= 0 && $("input[name=interval]").val().search(/mly/i) >= 0 && $("input[name=season_start]").val().search(/-|,/) >= 0) {
					alert("For monthly season-to-date, need to specify a season start as just a month");
					$("[name=season_start]").effect("highlight", {color: "yellow"}, 1000).focus();
					return false;
				}
				$("#add_elem").removeClass("makeRequired");
				$('#elem_box').show();
				$('input[name=elems]').val("").parent().parent().hide();
				single_elem = {};
				$('.elems_opts input').each(function () {
					if (this.value.length > 0) {
						if ($.isNumeric(this.value) && this.name !== "season_start") {
							single_elem[this.name] = parseInt(this.value, 10);
						} else if (this.name === "units") {
							single_elem[this.name] = this.value;
						} else if (this.name === "gname") {
							single_elem["name"] = this.value.toLowerCase();
						} else {
							single_elem[this.name] = this.value.replace(/\s/g, "").toLowerCase();
						}
					}
				});
				if (single_elem.season_start && single_elem.season_start.search(",") >= 0) {
					single_elem.season_start = makeList(single_elem.season_start);
				}
				if (single_elem.interval && !$.isNumeric(single_elem.interva) && single_elem.interval.search(",") >= 0) {
					single_elem.interval = makeList(single_elem.interval);
				} else if (single_elem.interval && $.isNumeric(single_elem.interval)) {
					single_elem.interval = [single_elem.interval];
				}
				if (single_elem.groupby && single_elem.groupby.search(",") >= 0) {
					combo_list = [];
					$(single_elem.groupby.split(",")).each(function (i, e) {
						combo_list.push(e);
					});
					single_elem.groupby = combo_list;
				}
				if (single_elem.smry && single_elem.smry.search(",") >= 0) {
					combo_list = [];
					$(single_elem.smry.split(",")).each(function (i, e) {
						combo_list.push(e);
					});
					single_elem.smry = combo_list;
				}
				if (single_elem.reduce_add || single_elem.reduce_n || single_elem.reduce_maxmissing) {
					single_elem.reduce = makeObject([["reduce", single_elem.reduce], ["add", single_elem.reduce_add],
													 ["n", single_elem.reduce_n], ["run_maxmissing", single_elem.reduce_maxmissing]]);
					delete single_elem.reduce_add;
					delete single_elem.reduce_n;
					delete single_elem.reduce_maxmissing;
				}
				if (single_elem.smry_add || single_elem.smry_n || single_elem.smry_maxmissing) {
					single_elem.smry = makeObject([["reduce", single_elem.smry], ["add", single_elem.smry_add],
												   ["n", single_elem.smry_n], ["run_maxmissing", single_elem.smry_maxmissing]]);
					delete single_elem.smry_add;
					delete single_elem.smry_n;
					delete single_elem.smry_maxmissing;
				}
				if ($("textarea[name=elems_container]").val().length) {
					elem_list = JSON.parse($("textarea[name=elems_container]").val());
				} else {
					elem_list = [];
				}
				elem_list.push(single_elem);
				$("textarea[name=elems_container]").attr('rows', elem_list.length).val(JSON.stringify(elem_list));
				$("input[name=interval]").attr("disabled", true).addClass("grayout");
			});
			$("#clear_elem").button().on("click", function () {
				elem_list = [];
				$("textarea[name=elems_container]").attr('rows', 1).val(elem_list);
				$("input[name=interval]").attr("disabled", false).removeClass("grayout");
			});
			$(".oelem input").on("keydown", function (e) {
				if (e.keyCode !== 9) {
					$("#add_elem").addClass("makeRequired");
				}
			});
			$("#singledate").on("change", function () {
				if ($(this).is(':checked')) {
					$("input[name=sdate]").parent().parent().children("th").text("Date:");
					$("input[name=edate]").parent().parent().hide();
				} else {
					$("input[name=sdate]").parent().parent().children("th").text("Start Date:");
					$("input[name=edate]").parent().parent().show();
				}
			});
			$("input[name=elems]").on("keyup", function () {
				if ($(this).val().search(",") >= 0 || $(this).val().length > 5) {
					$(".oelem").hide();
				} else {
					$(".oelem").show();
					$("input[name=season_start]").val("").parent().parent().hide();
				}
			});
			$("input[name=name]").on({
				focus: function () {
					$("input[name=name]").val($("input[name=elems]").val());
				},
				keyup: function () {
					if ($(this).val().length >= 3) {
						if ($(this).val().search(/hdd/i) >= 0 || $(this).val().search(/cdd/i) >= 0 || $(this).val().search(/gdd/i) >= 0) {
							$("input[name=base]").parent().parent().show();
						} else {
							$("input[name=base]").val("").parent().parent().hide();
						}
					} else if ($(this).val().length === 0) {
						$("input[name=base]").val("").parent().parent().hide();
					}
				}
			});
			$("input[name=smry]").on("keyup", function () {
				if ($(this).val().length >= 1) {
					$("input[name=smry_add]").parent().parent().fadeIn('fast');
					$("input[name=smry_n]").parent().parent().fadeIn('fast');
					$("input[name=smry_only]").parent().parent().fadeIn('fast');
					if ($(this).val().length >= 3 && $(this).val().substr(0, 3).toLowerCase() === 'run') {
						$("input[name=smry_maxmissing]").parent().parent().fadeIn('fast');
					} else {
						$("input[name=smry_maxmissing]").parent().parent().fadeOut('fast');
					}
				} else if ($(this).val().length === 0) {
					$("input[name=smry_add]").val('').parent().parent().fadeOut('fast');
					$("input[name=smry_n]").val('').parent().parent().fadeOut('fast');
					$("input[name=smry_only]").val('').parent().parent().fadeOut('fast');
					$("input[name=smry_maxmissing]").val('').parent().parent().fadeOut('fast');
				}
			});
			$("input[name=reduce]").on("keyup", function () {
				if ($(this).val().length >= 1) {
					$("input[name=reduce_add]").parent().parent().fadeIn('fast');
					if ($(this).val().length >= 3 && $(this).val().substr(0, 3).toLowerCase() === 'run') {
						$("input[name=reduce_n]").parent().parent().fadeIn('fast');
						$("input[name=reduce_maxmissing]").parent().parent().fadeIn('fast');
					} else {
						$("input[name=reduce_n]").parent().parent().fadeOut('fast');
						$("input[name=reduce_maxmissing]").parent().parent().fadeOut('fast');
					}
				} else if ($(this).val().length === 0) {
					$("input[name=reduce_add]").val('').parent().parent().fadeOut('fast');
					$("input[name=reduce_n]").val('').parent().parent().fadeOut('fast');
					$("input[name=reduce_maxmissing]").val('').parent().parent().fadeOut('fast');
				}
			});
			$("input[name=interval]").on("keyup", function () {
				if ($(this).val().length >= 3) {
					if ($(this).val().search(/yly/i) >= 0) {
						$("input[name=groupby]").val("").parent().parent().hide();
					} else {
						$("input[name=groupby]").parent().parent().show();
					}
				} else if ($(this).val().length === 0) {
					$("input[name=groupby]").parent().parent().show();
				}
			});
			$("input[name=duration]").on("keyup", function () {
				if ($(this).val().length >= 3 || $.isNumeric($(this).val())) {
					if ($(this).val().search(/std/i) >= 0) {
						$("input[name=season_start]").addClass("makeRequired").parent().parent().show();
					} else {
						$("input[name=season_start]").removeClass("makeRequired").val("").parent().parent().hide();
					}
					if ($(this).val().search(/dly/i) >= 0 || ($(this).val() === "1" && $("input[name=interval]").val().search(/dly/i) >= 0)) {
						$("input[name=reduce]").removeClass("makeRequired").val("").parent().parent().hide();
						$("input[name=reduce_add]").val('').parent().parent().hide();
						$("input[name=reduce_n]").val('').parent().parent().hide();
						$("input[name=reduce_maxmissing]").val('').parent().parent().hide();
						$("input[name=maxmissing]").val("").parent().parent().hide();
						$("input[name=add]").parent().parent().show();
					} else {
						$("input[name=reduce]").addClass("makeRequired").parent().parent().show();
						$("input[name=maxmissing]").parent().parent().show();
						$("input[name=add]").val("").parent().parent().hide();
					}
				}
			});
		}
		
		function go_general() {
			var areaname;
			$("#prelimMsg").hide();
			$("#specs").empty().append('<h2>Required input<\/h2>' +
					'<table class="input_opts">' +
						'<tr><th>Area:<td><select name="area">' +
							'<option>state<\/option><option>county<\/option><option>climdiv<\/option><option>cwa<\/option><option>basin<\/option>' +
						'<\/select><\/tr>' +
						'<tr class="gqual"><td colspan=2><span style="font-style:italic;">Enter one of the following qualifiers<\/span><\/tr>' +
						'<tr class="gqual"><th>State:<td><input type="text" name="state" size=11 \/><\/tr>' +
						'<tr class="gqual"><th>ID:<td><input type="text" name="id" size=11 \/><\/tr>' +
						'<tr class="gqual"><th>Bounding box:<td><input type="text" name="bbox" size=22 \/><\/tr>' +
					'<\/table>' +
					'<h2>Optional input<\/h2>' +
					'<table class="input_opts">' +
						'<tr><th>Meta options:<td style="width:100%;"><input type="text" name="meta" class="meta" \/><\/tr>' +
					'<\/table>' +
					'<p><button id="request_submit" class="submitButton">Submit<\/button><\/p>');
			$("#specs :input").addClass("ui-widget-content ui-corner-all ui-state-default");
			$("#select[name=area]").addClass("ui-widget-content ui-corner-all ui-state-default");
			$("#request_submit").button();
			$(".gqual input").on("keyup", function () {
				if ($(this).val().length) {
					areaname = $(this).attr("name");
					$(".gqual").each(function () {
						if ($(this).find("input").attr("name") !== areaname) {
							$(this).fadeOut('fast');
						}
					});
				} else if ($(this).val().length === 0) {
					$(".gqual").fadeIn('fast');
				}
			});
			table_events("input", "bbox", "bbox_table");
			table_events("input", "state", "state_table");
			table_events("input", "meta", "general_table");
		}
		function go_multistndata() {
			var areaname;
			$("#prelimMsg").hide();
			$("#specs").empty().append('<h2>Required input<\/h2>' +
					'<table class="input_opts">' +
						'<tr class="areatype"><td colspan=2><span style="font-style:italic;">(Enter id(s) for one of the following area types)<\/span><\/tr>' +
						'<tr class="areatype"><th>County:<td><input type="text" name="county" size=22 \/><\/tr>' +
						'<tr class="areatype"><th>Climate division:<td><input type="text" name="climdiv" size=22 \/><\/tr>' +
						'<tr class="areatype"><th>CWA:<td><input type="text" name="cwa" size=22 \/><\/tr>' +
						'<tr class="areatype"><th>Basin:<td><input type="text" name="basin" size=22 \/><\/tr>' +
						'<tr class="areatype"><th>State:<td><input type="text" name="state" size=22 \/><\/tr>' +
						'<tr class="areatype"><th>Bounding box:<td><input type="text" name="bbox" size=22 \/><\/tr>' +
						'<tr class="areatype"><th>Station list:<td><input type="text" name="sids" size=22 \/><\/tr>' +
						'<tr><th>Start Date:<td><input type="text" name="sdate" size=12 \/><input type="checkbox" id="singledate" \/>single date<\/tr>' +
						'<tr><th>End Date:<td><input type="text" name="edate" size=12 \/><\/tr>' +
						'<tr><th>Element name(s):<td><input type="text" name="elems" size=35 \/><\/tr>' +
					'<\/table>' +
					'<div id="elem_box" class="ui-helper-hidden">' +
						'<span style="line-height:1.8em;font-weight:bold;">Elements:<\/span>' +
						'<br \/><textarea name="elems_container" rows="1" cols="65" \/>' +
					'<\/div>' +
					'<h2 class="oelem">Optional element specifications<\/h2>' +
					'<table class="oelem elems_opts">' +
						'<tr><th>Name:<td><input type="text" name="name" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Base:<td><input type="text" name="base" size=12 \/><\/tr>' +
						'<tr><th>Interval:<td><input type="text" name="interval" size=12 \/><\/tr>' +
						'<tr><th>Duration:<td><input type="text" name="duration" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Season start:<td><input type="text" name="season_start" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Add:<td><input type="text" name="add" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Reduction:<td><input type="text" name="reduce" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th style="padding-left:1em;">&bull; Add:<td><input type="text" name="reduce_add" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th style="padding-left:1em;">&bull; Number:<td><input type="text" name="reduce_n" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th style="padding-left:1em;">&bull; Run max miss:<td><input type="text" name="reduce_maxmissing" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Max missing:<td><input type="text" name="maxmissing" size=12 \/><\/tr>' +
						'<tr><th>Summary:<td><input type="text" name="smry" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th style="padding-left:1em;">&bull; Add:<td><input type="text" name="smry_add" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th style="padding-left:1em;">&bull; Smry number:<td><input type="text" name="smry_n" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th style="padding-left:1em;">&bull; Run max miss:<td><input type="text" name="smry_maxmissing" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Summary only:<td><input type="text" name="smry_only" size=12 \/><\/tr>' +
						'<tr><th>Normal:<td><input type="text" name="normal" size=12 \/><\/tr>' +
						'<tr><th>Group by:<td><input type="text" name="groupby" size=12 \/><\/tr>' +
						'<tr><th>Precision:<td><input type="text" name="prec" size=12 \/><\/tr>' +
						'<tr><td colspan=2 style="text-align:center;"><button id="add_elem">Add element<\/button><button id="clear_elem">Clear elements<\/button><\/tr>' +
					'<\/table>' +
					'<h2>Other optional input<\/h2>' +
					'<table class="input_opts">' +
						'<tr><th>Meta options:<td style="width:100%;"><input type="text" name="meta" class="meta" \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Output option:<td><input type="text" name="output" size=12 \/><\/tr>' +
					'<\/table>' +
					'<p><button id="request_submit" class="submitButton">Submit<\/button><\/p>');
			$("#specs :input").addClass("ui-widget-content ui-corner-all ui-state-default");
			$("#request_submit").button();
			add_element_interaction();
			$(".areatype input").on("keyup", function () {
				if ($(this).val().length) {
					areaname = $(this).attr("name");
					$(".areatype").each(function () {
						if ($(this).find("input").attr("name") !== areaname) {
							$(this).fadeOut('fast');
						}
					});
					$(".areatype th").css("padding-left", "0em");
				} else if ($(this).val().length === 0) {
					$(".areatype th").css("padding-left", "1em");
					$(".areatype").fadeIn('fast');
				}
			});
			$("#singledate").on("change", function () {
				if ($(this).is(':checked') && $("input[name=meta]").val().length === 0) {
					$("input[name=output]").parent().parent().show();
				} else {
					$("input[name=output]").val('json').parent().parent().hide();
				}
			});
			table_events("input", "bbox", "area_table");
			table_events("input", "state", "area_table");
			table_events("input", "meta", "meta_table");
		}
		function go_stndata() {
			$("#prelimMsg").hide();
			$("#specs").empty().append('<table class="input_opts">' +
                '<tr><th><input type="hidden" name="apikey" value="e57c858f031526a86bcd7caf50842cf2"\/><\/tr>' +
                '<\/table>' +
			    	'<h2>Weather Station<\/h2>' +
                	'<table class="input_opts">' +
						'<tr><th>Station id:<td><input type="text" name="sid" size=12 \/><\/tr>' +
						'<tr><th>Station name:<td><input type="text" name="sname" size=12 \/><\/tr>' +
					'<\/table>' +
                '<h2>Field<\/h2>' +
                '<table class="input_opts">' +
                '<tr><th>Latitude:<td><input type="text" name="flat" size=12 \/><\/tr>' +
                '<tr><th>Longitude:<td><input type="text" name="flon" size=12 \/><\/tr>' +
                '<tr><th>State:<td><input type="text" name="fstate" size=12 \/><\/tr>' +
                '<\/table>' +
			/*
					'<div id="elem_box" class="ui-helper-hidden">' +
						'<span style="line-height:1.8em;font-weight:bold;">Elements:<\/span>' +
						'<br \/><textarea name="elems_container" rows="1" cols="65" \/>' +
					'<\/div>' +
					'<h2 class="oelem">Optional element specifications<\/h2>' +
					'<table class="oelem elems_opts">' +
						'<tr><th>Name:<td><input type="text" name="name" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Base:<td><input type="text" name="base" size=12 \/><\/tr>' +
						'<tr><th>Interval:<td><input type="text" name="interval" size=12 \/><\/tr>' +
						'<tr><th>Duration:<td><input type="text" name="duration" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Season start:<td><input type="text" name="season_start" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Add:<td><input type="text" name="add" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Reduction:<td><input type="text" name="reduce" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th style="padding-left:1em;">&bull; Add:<td><input type="text" name="reduce_add" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th style="padding-left:1em;">&bull; Number:<td><input type="text" name="reduce_n" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th style="padding-left:1em;">&bull; Run max miss:<td><input type="text" name="reduce_maxmissing" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Max missing:<td><input type="text" name="maxmissing" size=12 \/><\/tr>' +
						'<tr><th>Summary:<td><input type="text" name="smry" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th style="padding-left:1em;">&bull; Add:<td><input type="text" name="smry_add" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th style="padding-left:1em;">&bull; Smry number:<td><input type="text" name="smry_n" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th style="padding-left:1em;">&bull; Run max miss:<td><input type="text" name="smry_maxmissing" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Summary only:<td><input type="text" name="smry_only" size=12 \/><\/tr>' +
						'<tr><th>Normal:<td><input type="text" name="normal" size=12 \/><\/tr>' +
						'<tr><th>Group by:<td><input type="text" name="groupby" size=12 \/><\/tr>' +
						'<tr><th>Precision:<td><input type="text" name="prec" size=12 \/><\/tr>' +
						'<tr><td colspan=2 style="text-align:center;"><button id="add_elem">Add element<\/button><button id="clear_elem">Clear elements<\/button><\/tr>' +
					'<\/table>' +
					'<h2>Other optional input<\/h2>' +
					'<table class="input_opts">' +
						'<tr><th>Meta options:<td style="width:100%;"><input type="text" name="meta" class="meta" \/><\/tr>' +
						'<tr><th>Output option:<td><input type="text" name="output" size=12 \/><\/tr>' +
					'<\/table>' + */
					'<p><button id="request_submit" class="submitButton">Submit<\/button><\/p>');
			$("#specs :input").addClass("ui-widget-content ui-corner-all ui-state-default");
			$("#request_submit").button();
			add_element_interaction();
			table_events("input", "meta", "meta_table");
		}
		function go_stnmeta() {
			var others;
			$("#prelimMsg").hide();
			$("#specs").empty().append('<font color = "red"> <i>Not yet functional</i></font>' +
			    '<h2>Field Information<\/h2>' +
					'<table class="input_opts" style="margin-top:8px;">' +
						'<tr class="mmeta"><td colspan=2><span style="font-style:italic;">(Mandatory)<\/span><\/tr>' +
						'<tr><th>Latitude:<td><input type="text" name="sids" size=22 \/><\/tr>' +
						'<tr class="mmeta"><th>Longitude:<td><input type="text" name="county" size=22 \/><\/tr>' +
'<\/table>' +
'<h2>Crop Management<\/h2>' +
					'<table class="input_opts" style="margin-top:8px;">' +
						'<tr class="mmeta"><td colspan=2><span style="font-style:italic;">(Mandatory)<\/span><\/tr>' +
						'<tr><th>Planting Date:<td><input type="text" name="sids" size=22 \/><\/tr>' +
						'<tr class="mmeta"><th>Relative Maturity:<td><input type="text" name="county" size=22 \/><\/tr>' +

						'<tr class="mmeta"><th>Plant Population:<td><input type="text" name="climdiv" size=22 \/><\/tr>' +
'<\/table>' +
'<h2>Soil Properties<\/h2>' +
					'<table class="input_opts" style="margin-top:8px;">' +
		'<tr class="mmeta"><td colspan=2><span style="font-style:italic;">(Mandatory)<\/span><\/tr>' +				
						'<tr class="mmeta"><th>Soil rooting depth :<td><input type="text" name="cwa" size=22 \/><\/tr>' +
						'<tr class="mmeta"><th>Soil surface residues <br>coverage(%):<td><input type="text" name="basin" size=22 \/><\/tr>' +
						'<tr class="mmeta"><th>Top soil <br>bulk density:<td><input type="text" name="state" size=22 \/><\/tr>' +
						'<tr class="mmeta"><th>Top soil moisture <br>at planting:<td><input type="text" name="bbox" size=22 \/><\/tr>' +
				'<tr class="mmeta"><th>Sub soil moisture <br>at planting:<td><input type="text" name="bbox" size=22 \/><\/tr>' +
'<tr class="mmeta"><td colspan=2><span style="font-style:italic;">(Optional)<\/span><\/tr>' +				
						'<tr class="mmeta"><th>Top Soil Texture :<td><input type="text" name="cwa" size=22 \/><\/tr>' +
						'<tr class="mmeta"><th>Sub Soil Texture :<td><input type="text" name="basin" size=22 \/><\/tr>' +
'<\/table>' +

					'<table class="input_opts">' +

					'<h2>Irrigation records<\/h2>' +
						'<tr class="mmeta"><th>Date :<td><input type="text" name="cwa" size=22 \/><\/tr>' +
						'<tr class="mmeta"><th>Amount :<td><input type="text" name="basin" size=22 \/><\/tr>' +

					'<\/table>' +

					'<table class="input_opts">' +
						'<tr><th>Date:<td style="width:100%;"><input type="text" name="meta" class="meta" \/><\/tr>' +
						'<tr class="ometa"><th>Elements:<td><input type="text" name="elems"  style="width:97%;" \/><\/tr>' +
						'<tr class="ometa"><th>Start Date:<td><input type="text" name="sdate" size=12 \/><input type="checkbox" id="singledate" \/>single date<\/tr>' +
						'<tr class="ometa"><th>End Date:<td><input type="text" name="edate" size=12 \/><\/tr>' +
						'<tr><th>Output option:<td><input type="text" name="output" size=12 \/><\/tr>' +
					'<\/table>' +
					'<p><button id="request_submit" class="submitButton">Submit<\/button><\/p>');
			$("#specs :input").addClass("ui-widget-content ui-corner-all ui-state-default");
			$("#request_submit").button();
			$(".ometa").hide();
			$(".mmeta input").on("keyup", function () {
				if ($(this).val().length) {
					$("input[name=sids]").parent().parent().fadeOut('fast');
					$(".ometa").show();
				} else {
					others = 0;
					$(".mmeta input").each(function (i, j) {
						others += j.value.length;
					});
					if (!others) {
						$("input[name=sids]").parent().parent().fadeIn('fast');
						$(".ometa").hide();
					}
				}
			});
			$("input[name=sids]").on("keyup", function () {
				if ($(this).val().length) {
					$(".mmeta").fadeOut('fast');
				} else {
					$(".mmeta").fadeIn('fast');
				}
			});
			$("input[name=meta]").on("keyup", function () {
				if ($(this).val().length) {
					$("input[name=output]").val('json').parent().parent().fadeOut('fast');
				} else {
					$("input[name=output]").parent().parent().fadeIn('fast');
				}
				if ($(this).val().search(/valid_daterange/i) >= 0) {
					$("input[name=elems]").addClass("makeRequired").parent().parent().show();
				} else if ($("input[name=sids]").val().length) {
					$("input[name=elems]").removeClass("makeRequired").parent().parent().hide();
				}
			});
			$("#singledate").on("change", function () {
				if ($(this).is(':checked')) {
					$("input[name=sdate]").parent().parent().children("th").text("Date:");
					$("input[name=edate]").parent().parent().hide();
				} else {
					$("input[name=sdate]").parent().parent().children("th").text("Start Date:");
					$("input[name=edate]").parent().parent().show();
				}
			});
			table_events("input", "bbox", "area_table");
			table_events("input", "state", "area_table");
			table_events("input", "meta", "meta_table");
		}
		function go_griddata() {
			var areaname, hwchoice;
			$("#prelimMsg").show();
			$("#specs").empty().append('<h2>Required input<\/h2>' +
					'<table class="input_opts">' +
						'<tr class="areatype"><td colspan=2><span style="font-style:italic;">(Enter information for one of the following grid selection types)<\/span><\/tr>' +
						'<tr class="areatype"><th>Point location:<td><input type="text" name="loc" size=22 \/><\/tr>' +
						'<tr class="areatype"><th>State:<td><input type="text" name="state" size=22 \/><\/tr>' +
						'<tr class="areatype"><th>Bounding box:<td><input type="text" name="bbox" size=22 \/><\/tr>' +
						'<tr><th>Start Date:<td><input type="text" name="sdate" size=12 \/><input type="checkbox" id="singledate" \/>single date<\/tr>' +
						'<tr><th>End Date:<td><input type="text" name="edate" size=12 \/><\/tr>' +
						'<tr><th>Grid id:<td><input type="text" name="grid" size=12 \/><\/tr>' +
						'<tr><th>Element name(s):<td><input type="text" name="elems" size=35 \/><\/tr>' +
					'<\/table>' +
					'<div id="elem_box" class="ui-helper-hidden">' +
						'<span style="line-height:1.8em;font-weight:bold;">Elements:<\/span>' +
						'<br \/><textarea name="elems_container" rows="1" cols="65" \/>' +
					'<\/div>' +
					'<h2 class="oelem">Optional element specifications<\/h2>' +
					'<table class="oelem elems_opts">' +
						'<tr><th>Name:<td><input type="text" name="gname" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Base:<td><input type="text" name="base" size=12 \/><\/tr>' +
						'<tr><th>Interval:<td><input type="text" name="interval" size=12 \/><\/tr>' +
						'<tr><th>Duration:<td><input type="text" name="duration" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Season start:<td><input type="text" name="season_start" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Reduction:<td><input type="text" name="reduce" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Max missing:<td><input type="text" name="maxmissing" size=12 \/><\/tr>' +
						'<tr><th>Summary:<td><input type="text" name="smry" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden"><th>Summary only:<td><input type="text" name="smry_only" size=12 \/><\/tr>' +
						'<tr><th>Units:<td><input type="text" name="units" size=12 \/><\/tr>' +
						'<tr><th>Area reduction:<td><input type="text" name="area_reduce" size=12 \/><\/tr>' +
						'<tr><td colspan=2 style="text-align:center;"><button id="add_elem">Add element<\/button><button id="clear_elem">Clear elements<\/button><\/tr>' +
					'<\/table>' +
					'<h2>Other optional input<\/h2>' +
					'<table class="input_opts">' +
						'<tr><th>Meta options:<td><input type="text" name="meta" size=12 \/><\/tr>' +
						'<tr><th>Output option:<td><input type="text" name="output" size=12 \/><\/tr>' +
						'<tr><th>Generate map: <input type="checkbox" id="showimgopts" \/><\/tr>' +
						'<tr class="ui-helper-hidden image_opts"><th style="padding-left:1em;">&bull; Info only:<td><input type="text" name="info_only" size=12" \/><\/tr>' +
						'<tr class="ui-helper-hidden image_opts"><th style="padding-left:1em;">&bull; Proj:<td><input type="text" name="proj" size=12 value="lcc" \/><\/tr>' +
						'<tr class="ui-helper-hidden image_opts"><th style="padding-left:1em;">&bull; Overlays:<td><input type="text" name="overlays" size=12 value="state" \/><\/tr>' +
						'<tr class="ui-helper-hidden image_opts"><th style="padding-left:1em;">&bull; Interp:<td><input type="text" name="interp" size=12 value="cspline" \/><\/tr>' +
						'<tr class="ui-helper-hidden image_opts"><th style="padding-left:1em;">&bull; Cmap:<td><input type="text" name="cmap" size=12 value="Blues" \/><\/tr>' +
						'<tr class="ui-helper-hidden image_opts image-size"><th style="padding-left:1em;">&bull; Width:<td><input type="text" name="width" size=12 value=350 \/><\/tr>' +
						'<tr class="ui-helper-hidden image_opts image-size"><th style="padding-left:1em;">&bull; Height:<td><input type="text" name="height" size=12 \/><\/tr>' +
						'<tr class="ui-helper-hidden image_opts"><th style="padding-left:1em;">&bull; Levels:<td><input type="text" name="levels" size=22 \/><\/tr>' +
					'<\/table>' +
					'<p><button id="request_submit" class="submitButton">Submit<\/button><\/p>');
			$("#specs :input").addClass("ui-widget-content ui-corner-all ui-state-default");
			$("#request_submit").button();
			add_element_interaction();
			$(".areatype input").on("keyup", function () {
				if ($(this).val().length >= 1 && $(".areatype :visible").length > 3) {
					areaname = $(this).attr("name");
					$(".areatype").each(function () {
						if ($(this).find("input").attr("name") !== areaname) {
							$(this).fadeOut('fast');
						}
					});
					if (areaname === 'loc') {
						$("input[name=area_reduce]").val("").parent().parent().fadeOut('fast');
					} else {
						$("input[name=area_reduce]").parent().parent().fadeIn('fast');
					}
					$(".areatype th").css("padding-left", "0em");
				} else if ($(this).val().length === 0) {
					$(".areatype th").css("padding-left", "1em");
					$(".areatype").fadeIn('fast');
				}
			});
			$("input[name=output]").on("keyup", function () {
				var checked = $("#showimgopts").prop("checked");
				if ($(this).val().length >= 3 && $(this).val().search(/image/i) === 0) {
					if (checked !== "checked") {
						$("#showimgopts").trigger("click");
					}
				} else if ($(this).val().length === 0) {
					if (checked === "checked") {
						$("#showimgopts").trigger("click");
					}
				}
			});
			$("#showimgopts").on("change", function () {
				if ($(this).is(':checked')) {
					$(".image_opts").fadeIn('fast');
					if ($("input[name=output]").val().search(/image/i) === 0) {
						$("input[name=info_only]").parent().parent().hide();
					}
				} else {
					$(".image_opts").fadeOut('fast');
				}
			});
			$(".image-size input").on("keyup", function () {
				if ($(this).val().length >= 1) {
					hwchoice = $(this).attr("name");
					$(".image-size").each(function () {
						if ($(this).find("input").attr("name") !== hwchoice) {
							$(this).fadeOut('fast').find("input").val("");
						}
					});
				} else if ($(this).val().length === 0) {
					$(".image-size").fadeIn('fast');
				}
			});
			table_events("input", "bbox", "bbox_table");
			table_events("input", "state", "state_table");
			table_events("input", "meta", "grid_meta_table");
		}
		$(function () {
		/*	$('<div id="wstypebar"><\/div>')
				.appendTo("#builder")
				.buttonBar({
					barName: "wstype",
					barOrient: "horizontal",
					buttonInfo: [["stnmeta_button", "StnMeta"], ["stndata_button", "StnData"], ["multistndata_button", "MultiStnData"], ["griddata_button", "GridData"], ["general_button", "General"]],
					buttonDefault: "stndata_button"
				}); */
			$("#wstype input").on("click", function () {
				$(".codes").parent().hide();
				$("#output").hide();
			});
			$("#stnmeta_button").val("StnData").on("click", go_stndata).click();
			$("#stndata_button").val("StnMeta").on("click", go_stnmeta);
			$("#multistndata_button").val("MultiStnData").on("click", go_multistndata);
			$("#griddata_button").val("GridData").on("click", go_griddata);
			$("#general_button").val("General/").on("click", go_general);
			$("#builder").append('<div id="prelimMsg" class="ui-helper-hidden">... Image specifications subject to change based on feedback ...</div>');
			$("#infoDialog").dialog({
				autoOpen: false,
				modal: true,
				show: true,
				hide: true,
				position: "center",
				width: "auto"
			});
			$("#specs").on("click", "#request_submit", collect_data);
			$("#specs").on("change", ".makeRequired", function () {
				$(this).removeClass("makeRequired");
			});
			$("#allspecs").on("click", ".codes", function () {
				$("#infoDialog").dialog("option", "title", $(this).find('caption').text()).html($(this).parent().html()).dialog('open');
				$("#infoDialog caption").remove();
			});
			$("#interval_hover").hover(
			  function() {
			    $(this).find("span:first-child").hide();
				$("#interval_details").show();
			  }, function() {
			    $(this).find("span:first-child").show();
				$("#interval_details").hide();
			  }
			);
			// setup all events for all the tables (except bbox, state and meta, which differ between General and others)
			table_events("input", "add", "add_table");
			table_events("input", "basin", "area_table");
			table_events("input", "climdiv", "area_table");
			table_events("input", "county", "area_table");
			table_events("input", "cwa", "area_table");
			table_events("input", "duration", "duration_table");
			table_events("input", "edate", "date_table");
			table_events("input", "elems", "elems_table");
			table_events("input", "id", "general_table");
			table_events("input", "interval", "interval_table");
			table_events("input", "maxmissing", "maxmissing_table");
			table_events("input", "name", "elems_table");
			table_events("input", "gname", "grid_elems_table");
			table_events("input", "normal", "normal_table");
			table_events("input", "output", "output_table");
			table_events("input", "prec", "prec_table");
			table_events("input", "reduce", "reduce_table");
			table_events("input", "reduce_add", "reduce-smry_add_table");
			table_events("input", "reduce_n", "reduce-smry_n_table");
			table_events("input", "reduce_maxmissing", "reduce-smry_maxmissing_table");
			table_events("input", "sdate", "date_table");
			table_events("input", "season_start", "season_start_table");
			table_events("input", "sid", "sid_table");
            table_events("input", "sname", "sid_table");
            table_events("input", "flat", "fc_table");
            table_events("input", "flon", "fc_table");
            table_events("input", "fstate", "fc_table");
			table_events("input", "sids", "sid_table");
			table_events("input", "smry", "smry_table");
			table_events("input", "smry_add", "reduce-smry_add_table");
			table_events("input", "smry_only", "smry_only_table");
			table_events("input", "smry_n", "reduce-smry_n_table");
			table_events("input", "smry_maxmissing", "reduce-smry_maxmissing_table");
			table_events("select", "area", "general_table");
			table_events("textarea", "elems_container", "elems_keys_table");
			table_events("input", "grid", "grid_table");
			table_events("input", "loc", "loc_table");
			table_events("input", "area_reduce", "area_reduce_table");
			table_events("input", "type", "type_table");
			table_events("input", "info_only", "info_only_table");
			table_events("input", "proj", "proj_table");
			table_events("input", "overlays", "overlays_table");
			table_events("input", "interp", "interp_table");
			table_events("input", "cmap", "cmap_table");
			table_events("input", "width", "width_height_table");
			table_events("input", "height", "width_height_table");
			table_events("input", "levels", "levels_table");
			table_events("input", "groupby", "groupby_table");
			table_events("input", "units", "units_table");
			// Ajax error handling
			$.ajaxSetup({
				error: function (x, e) {
					if (x.status === 0) {
						$("#jresults").empty().html("<pre>" + serverUrl + " is offline - check your network.<\/pre>");
					} else if (x.status === 404) {
						$("#jresults").empty().html("<pre>Requested URL not found.<\/pre>");
					} else if (x.status === 500) {
						$("#jresults").empty().html("<pre>Internal Server Error.<\/pre>");
					} else if (e === "parsererror") {
						$("#jresults").empty().html("<pre>Error parsing JSON response.<\/pre>");
					} else if (e === "timeout") {
						$("#jresults").empty().html("<pre>Request timed out<\/pre>.");
					} else {
						$("#jresults").empty().html("<pre>Error: " + x.responseText + "<\/pre>");
					}
				}
			});
		});
	</script>
  </head>

<body>
<div class="pagecontainer">
<h2 style="margin-bottom:0px;">CSIS API Query Builder</h2>
<div id="builder">
	<div id="wstypebar" class="ui-widget ui-helper-reset"><div id="wstype" class="ui-buttonset" style="text-align: center; margin-right: 0px;">
		<input type="radio" name="wstype" id="stnmeta_button" class="ui-helper-hidden-accessible" value="StnMeta"><label for="stnmeta_button" class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-left ui-state-active" role="button" aria-pressed="true"><span class="ui-button-text">StnData</span></label>
		<input type="radio" name="wstype" id="stndata_button" class="ui-helper-hidden-accessible" value="StnData"><label for="stndata_button" class="ui-button ui-widget ui-state-default ui-button-text-only" role="button" aria-pressed="false"><span class="ui-button-text">CrpData</span></label>

		<!--
		<input type="radio" name="wstype" id="multistndata_button" class="ui-helper-hidden-accessible" value="MultiStnData"><label for="multistndata_button" class="ui-button ui-widget ui-state-default ui-button-text-only" role="button" aria-pressed="false"><span class="ui-button-text">MultiStnData</span></label><input type="radio" name="wstype" id="griddata_button" class="ui-helper-hidden-accessible" value="GridData"><label for="griddata_button" class="ui-button ui-widget ui-state-default ui-button-text-only" role="button" aria-pressed="false"><span class="ui-button-text">GridData</span></label><input type="radio" name="wstype" id="general_button" class="ui-helper-hidden-accessible" value="General/"><label for="general_button" class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-right" role="button" aria-pressed="false"><span class="ui-button-text">General</span></label></div></div><div id="prelimMsg" class="ui-helper-hidden" style="display: none;">... Image specifications subject to change based on feedback ...</div>
		-->
		</div>
<div id="allspecs">
<div id="specs">

<h2>Field inputs</h2><table class="input_opts" style="margin-top:8px;"><tbody><tr class="mmeta"><td colspan="2"><span style="font-style:italic;">(Mandatory)</span></td></tr><tr><th>Latitude:</th><td><input type="text" name="sids" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr><tr class="mmeta"><th>Longitude:</th><td><input type="text" name="county" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr></tbody></table>

<h2>Crop Management</h2><table class="input_opts" style="margin-top:8px;"><tbody><tr class="mmeta"><td colspan="2"><span style="font-style:italic;">(Mandatory)</span></td></tr><tr class="mmeta"><th>Planting Date:</th><td><input type="text" name="climdiv" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr><tr class="mmeta"><th>Relative maturity:</th><td><input type="text" name="cwa" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr><tr class="mmeta"><th>Plant Population:</th><td><input type="text" name="basin" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr><tr class="mmeta"><th>State:</th><td><input type="text" name="state" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr><tr class="mmeta"><th>Bounding box:</th><td><input type="text" name="bbox" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr></tbody></table>

<h2>Soil Properties</h2><table class="input_opts" style="margin-top:8px;"><tbody><tr class="mmeta"><td colspan="2"><span style="font-style:italic;">(Mandatory)</span></td></tr><tr class="mmeta"><th>Soil rooting depth :</th><td><input type="text" name="climdiv" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr><tr class="mmeta"><th>Soil surface residues coverage:</th><td><input type="text" name="cwa" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr><tr class="mmeta"><th>Top soil bulk density:</th><td><input type="text" name="basin" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr><tr class="mmeta"><th>Top soil(1 foot) moisture at planting <br>(% of available water)</th><td><input type="text" name="state" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr><tr class="mmeta"><th>Sub soil(below 1 foot) moisture at planting<br>(% of available water):</th><td><input type="text" name="bbox" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr>

<tr class="mmeta"><td colspan="2"><span style="font-style:italic;">(Optional)</span></td></tr>
<tr class="mmeta"><th>Top soil(1 foot) texture:</th><td><input type="text" name="climdiv" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr><tr class="mmeta"><th>Sub soil(below 1 foot) texture:</th><td><input type="text" name="cwa" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr>
</tbody></table>


<h2>Irrigation Records</h2><table class="input_opts" style="margin-top:8px;"><tbody><tr class="mmeta"><td colspan="2"><span style="font-style:italic;">(If applicable)</span></td></tr><tr class="mmeta"><th>Date:</th><td><input type="text" name="climdiv" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr><tr class="mmeta"><th>Amount:</th><td><input type="text" name="cwa" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr><tr class="mmeta"><th>Plant Population:</th><td><input type="text" name="basin" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr><tr class="mmeta"><th>State:</th><td><input type="text" name="state" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr><tr class="mmeta"><th>Bounding box:</th><td><input type="text" name="bbox" size="22" class="ui-widget-content ui-corner-all ui-state-default"></td></tr></tbody></table>



<p><button id="request_submit" class="submitButton ui-widget-content ui-corner-all ui-state-default ui-button ui-widget ui-button-text-only" role="button"><span class="ui-button-text">Submit</span></button></p></div>

<!-- <hr /> -->
<div id="sid_table" style="display: none;">
	<table class="codes">
	<caption>Input Examples</caption>
	<tbody><tr><th>Input </th><th>Type </th><th>Description </th><th>Example</th></tr>
	<tr><td>Station Id </td><td> AWDN Id</td><td>6-digit AWDN id </td><td>a050119</td></tr>
	<tr><td>Station Name </td><td> Chars </td><td> Station Name or part of it </td><td>CARBON or CARBONDALE</td></tr>
	</tbody></table>
</div>

<div id="fc_table" style="display: none;">
		<table class="codes">
			<caption>Input Examples</caption>
			<tbody><tr><th>Input </th><th>Type </th><th>Description </th><th>Example</th></tr>
			<tr><td>Latitude </td><td> AWDN Id</td><td>6-digit AWDN id </td><td>a050119</td></tr>
			<tr><td>Longitude </td><td> Chars </td><td> Station Name or part of it </td><td>CARBON or CARBONDALE</td></tr>
			<tr><td>State </td><td> AWDN Id</td><td>6-digit AWDN id </td><td>a050119</td></tr>
<!-- 
	<tr><td>16 <td>AWDN <td>7-character HPRCC AWDN id <td>a250059</tr>
	<tr><td>DEOS <td>11 <td>Delaware DEOS id <td></tr>
	<tr><td>MOWX <td>12 <td>Missouri Mesonet id <td></tr>
	<tr><td>OARC <td>22 <td>Ohio OARDC id <td></tr>
	<tr><td>MIWX <td>13 <td>Michigan Enviroweather<td></tr>
	<tr><td>NEWA <td>26 <td>NEWA id <td></tr>
	<tr><td>CULOG <td>27 <td>Cornell WxNet id <td></tr>
	<tr><td>NJWX <td>28 <td>NJ WxNet id <td></tr>
	<tr><td>CADX <td>29 <td>California Index id <td></tr>
 -->
	</tbody></table>
</div>

<div id="elems_table" style="display: none;">
	<table class="codes">
	<caption>Common Element Codes</caption>
	<tbody><tr><th>Abbreviation </th><th>Var Major </th><th>Description</th></tr>
	<tr><td>maxt </td><td>1  </td><td>Maximum temperature (F)</td></tr>
	<tr><td>mint </td><td>2  </td><td>Minimum temperature (F)</td></tr>
	<tr><td>avgt </td><td>43 </td><td>Average temperature (F)</td></tr>
	<tr><td>obst </td><td>3  </td><td>Obs time temperature (F)</td></tr>
	<tr><td>pcpn </td><td>4  </td><td>Precipitation (inches)</td></tr>
	<tr><td>snow </td><td>10 </td><td>Snowfall (inches)</td></tr>
	<tr><td>snwd </td><td>11 </td><td>Snow Depth (inches)</td></tr>
	<tr><td>     </td><td>7  </td><td>Pan evaporation (inches) </td></tr>
	<tr><td>cdd  </td><td>   </td><td>Cooling degree days (default base 65) </td></tr>
	<tr><td>hdd  </td><td>45 </td><td>Degree days below base (default base 65) </td></tr>
	<tr><td>gdd  </td><td>44 </td><td>Degree days above base (default base 50) </td></tr>
	<tr><td>cddXX</td><td>-  </td><td>Cooling Degree Days; where XX is base temperature </td></tr>
	<tr><td>hddXX</td><td>-  </td><td>Heating Degree Days; where XX is base temperature </td></tr>
	<tr><td>gddXX</td><td>-  </td><td>Growing Degree Days; where XX is base temperature </td></tr>
	</tbody><tfoot>
	<tr><td colspan="3"><i>Degree days can also be specified within an <code>elems</code>
	object with the keys "name" (or "vX") and "base".</i></td></tr>
	</tfoot>
	</table>
</div>

<div id="grid_elems_table" style="display: none;">
	<table class="codes">
	<caption>Common Grid Element Codes</caption>
	<tbody><tr><th>Abbreviation </th><th>Var Major </th><th>Description</th></tr>
	<tr><td>maxt </td><td>1  </td><td>Maximum temperature (F)</td></tr>
	<tr><td>mint </td><td>2  </td><td>Minimum temperature (F)</td></tr>
	<tr><td>avgt </td><td>43 </td><td>Average temperature (F)</td></tr>
	<tr><td>pcpn </td><td>4  </td><td>Precipitation (inches)</td></tr>
	<tr><td>cdd  </td><td>   </td><td>Cooling degree days (default base 65) </td></tr>
	<tr><td>hdd  </td><td>45 </td><td>Degree days below base (default base 65) </td></tr>
	<tr><td>gdd  </td><td>44 </td><td>Degree days above base (default base 50) </td></tr>
	<tr><td>cddXX</td><td>-  </td><td>Cooling Degree Days; where XX is base temperature </td></tr>
	<tr><td>hddXX</td><td>-  </td><td>Heating Degree Days; where XX is base temperature </td></tr>
	<tr><td>gddXX</td><td>-  </td><td>Growing Degree Days; where XX is base temperature </td></tr>
	<tr><td>gddXX</td><td>-  </td><td>Growing Degree Days; where XX is base temperature </td></tr>
	<tr><td colspan="3" style="text-align:center;"><i>Degree days can also be specified within an <code>elems</code>
		object with the keys "name" (or "vX") and "base".</i></td></tr>
	<tr><td colspan="3" style="text-align:center;"><b>Additional Element Codes for Monthly/Yearly PRISM Data</b><br>
		<i>The following codes are used to access monthly/yearly PRISM gridded datasets directly,
		not derived monthly/yearly means or sums reduced from daily gridded data.</i></td></tr>
	<tr><td>mly_maxt </td><td>91  </td><td>Monthly mean maximum temperature (F)</td></tr>
	<tr><td>mly_mint </td><td>92  </td><td>Monthly mean minimum temperature (F)</td></tr>
	<tr><td>mly_avgt </td><td>99  </td><td>Monthly mean average temperature (F)</td></tr>
	<tr><td>mly_pcpn </td><td>94  </td><td>Monthly precipitation sum (inches)</td></tr>
	<tr><td>yly_maxt </td><td>95  </td><td>Yearly mean maximum temperature (F)</td></tr>
	<tr><td>yly_mint </td><td>96  </td><td>Yearly mean minimum temperature (F)</td></tr>
	<tr><td>yly_avgt </td><td>100 </td><td>Yearly mean average temperature (F)</td></tr>
	<tr><td>yly_pcpn </td><td>98  </td><td>Yearly precipitation sum (inches)</td></tr>
	</tbody></table>
</div>

<div id="meta_table" style="display: none;">
	<table class="codes">
	<caption>Meta Options</caption>
	<tbody><tr><th>Code  </th><th>Description </th></tr>
	<tr><td>name  </td><td>Station name  </td></tr>
	<tr><td>state </td><td>2-letter state abbrev </td></tr>
	<tr><td>sids  </td><td>Array of station ids/types </td></tr>
	<tr><td>sid_dates  </td><td>Date range for each sid </td></tr>
	<tr><td>ll    </td><td>Longitude and latitude </td></tr>
	<tr><td>elev  </td><td>Elevation </td></tr>
	<tr><td>uid   </td><td>CSIS id </td></tr>
	<tr><td>county</td><td>5-digit FIPS id </td></tr>
	<tr><td>climdiv</td><td>4-character climate division id </td></tr>
	<tr><td>valid_daterange   </td><td>Valid date range (by variable) </td></tr>
	</tbody></table>
</div>

<div id="grid_meta_table" style="display: none;">
	<table class="codes">
	<caption>Meta Options</caption>
	<tbody><tr><th>Code  </th><th>Description </th></tr>
	<tr><td>ll    </td><td>Longitude and latitude of grid points </td></tr>
	<tr><td>elev  </td><td>Elevation of grid points </td></tr>
	</tbody></table>
</div>

<div id="reduce-smry_add_table" style="display: none;">
	<table class="codes">
	<caption>Reduction/Summary Add Codes</caption>
	<thead>
	<tr><th>Code  </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>mcnt  </td><td>Count of missing values in the reduction period </td></tr>
	<tr><td>date  </td><td>Date of occurrence (for max, min, run) </td></tr>
	<tr><td>value  </td><td>Value on date of occurrence (for first and last) </td></tr>
	<tr><td>rmcnt  </td><td>Count of missing values in the run period (for run only)</td></tr>
	</tbody>
	</table>
</div>

<div id="smry_only_table" style="display: none;">
	<table class="codes">
	<caption>Summary Only</caption>
	<thead>
	<tr><th>Code  </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>1  </td><td>Return only the summary value (no intermediate results). If used, must be specified for each element.</td></tr>
	</tbody>
	</table>
</div>

<div id="reduce-smry_n_table" style="display: none;">
	<table class="codes">
	<caption>Reduction/Summary Number</caption>
	<thead>
	<tr><th>Value  </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td><i>integer</i>  </td><td>Used with "run" reduction to specify max number of results returned per interval. </td></tr>
	</tbody>
	</table>
</div>

<div id="reduce-smry_maxmissing_table" style="display: none;">
	<table class="codes">
	<caption>Reduction/Summary Run Max Missing</caption>
	<thead>
	<tr><th>Value  </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td><i>integer</i>  </td><td>Used with "run" reduction to specify max number of missing days to allow before terminating run. </td></tr>
	</tbody>
	</table>
</div>

<div id="add_table" style="display: none;">
	<table class="codes">
	<caption>Additions Codes</caption>
	<thead>
	<tr><th>Code  </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>f </td><td>Flags </td></tr>
	<tr><td>t </td><td>Time of observation </td></tr>
	<tr><td>i </td><td>Station ID associated with data </td></tr>
	<tr><td>v </td><td>Var minor associated with data </td></tr>
	<tr><td>n </td><td>Network associated with data </td></tr>
	</tbody>
	</table>
</div>

<div id="normal_table" style="display: none;">
	<table class="codes">
	<caption>Normals Codes</caption>
	<thead>
	<tr><th>Code  </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>1 </td><td>Display normals </td></tr>
	<tr><td>departure </td><td>Display departure from normal </td></tr>
	<tr><td colspan="2">Normals are for the period 1981-2010 </td></tr>
	</tbody>
	</table>
</div>

<div id="interval_table" style="display: none;">
	<table class="codes">
	<caption>Interval Options</caption>
	<tbody><tr><th>Code </th><th>Description</th></tr>
	<tr><td>dly </td><td>results have daily time step </td></tr>
	<tr><td>mly </td><td>results have monthly time step </td></tr>
	<tr><td>yly </td><td>results have yearly time step </td></tr>
	<tr><td style="vertical-align:top;"><i>list</i> 
	</td><td id="interval_hover"><span>- Hover here to show details -</span>
	<div id="interval_details" style="display:none;">
		This can also be specified as an array containing a single positive integer and zeros. The 
		array can have a length of either 1, 2 or 3, with the length indicating the temporal 
		precision of the returned values. A length of 1 indicates annual precision, 2 monthly 
		precision and 3 daily precision. The position of integers within the array signifies 
		the frequency of the values returned. The strings "dly", "mly" and "yly" are shortcuts 
		for commonly used intervals as shown in the following table:		
		<table style="border-collapse:collapse;">
			<tbody><tr><th>String</th><th>Array</th><th>Explanation</th></tr>
			<tr><td>dly</td><td>[0,0,1]</td><td>A daily value is returned for each day.</td></tr>
			<tr><td>mly</td><td>[0,1]</td><td>A monthly value is returned for each calendar month.</td></tr>
			<tr><td>yly</td><td>[1]</td><td>An annual value is returned for each year.</td></tr>
		</tbody></table>
		Using an array for <code>interval</code> facilitates a number of more complex requests. The 
		following examples demonstrate some of these capabilities:
		<table style="border-collapse:collapse;">
			<tbody><tr><th>Array</th><th>Explanation</th></tr>
			<tr><td>[1,0,0]</td><td>Return a daily value once per year. For instance, daily rainfall for June 20  in each of a series of years.</td></tr>
			<tr><td>[0,1,0]</td><td>Return a daily value once per month. For instance, max temperature on the 15th of each month for a series of years.</td></tr>
			<tr><td>[0,0,7]</td><td>Return a daily value every seven days.</td></tr>
			<tr><td>[0,3,0]</td><td>Return a daily value every third month.</td></tr>
			<tr><td>[0,3]</td><td>Return a monthly value every third month.</td></tr>
		</tbody></table>
	</div>
	</td></tr>
	<tr><td colspan="2"><i>Note: <code>interval</code> must be the same for all objects in an <code>elems</code> array.</i></td></tr>
	</tbody></table>
</div>

<div id="duration_table" style="display: none;">
	<table class="codes">
	<caption>Duration Options</caption>
	<tbody><tr><th>Code </th><th>Description </th><th>Valid with intervals</th></tr>
	<tr><td>dly </td><td>Daily </td><td>dly </td></tr>
	<tr><td>mly </td><td>Monthly; must specify reduce </td><td>mly </td></tr>
	<tr><td>yly </td><td>Yearly; must specify reduce </td><td>yly </td></tr>
	<tr><td>mtd </td><td>Month-to-date; must specify reduce </td><td>dly </td></tr>
	<tr><td>ytd </td><td>Year-to-date; must specify reduce </td><td>dly, mly </td></tr>
	<tr><td>std </td><td>Season-to-date; must specify reduce and season_start </td><td>dly, mly </td></tr>
	<tr><td><i>integer</i> </td><td>Length of period to be analyzed in units specified in interval </td><td>dly, mly, yly </td></tr>
	</tbody></table>
</div>

<div id="reduce_table" style="display: none;">
	<table class="codes">
	<caption>Reduction Types</caption>
	<thead>
	<tr><th>Code  </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>max  </td><td>Maximum value for the period </td></tr>
	<tr><td>min  </td><td>Minimum value for the period </td></tr>
	<tr><td>sum  </td><td>Sum of the values for the period </td></tr>
	<tr><td>mean </td><td>Average of the values for the period </td></tr>
	<tr><td>stddev </td><td>Standard deviation of the values (GridData only) </td></tr>
	<tr><td>list </td><td>Array of daily values for the period </td></tr>
	<tr><td>cnt_xx_yyy </td><td>Count of number of daily values passing threshold </td></tr>
	<tr><td>pct_xx_yyy </td><td>Percent (integer) of daily values passing threshold </td></tr>
	<tr><td>fct_xx_yyy </td><td>Fraction (float) of daily values passing threshold </td></tr>
	<tr><td>first_xx_yyy </td><td>First occurrence of daily value passing threshold </td></tr>
	<tr><td>last_xx_yyy </td><td>Last occurrence of daily value passing threshold </td></tr>
	<tr><td>run_xx_yyy </td><td>Consecutive daily values passing threshold </td></tr>
	<tr><td> </td><td>xx is operator (ge, gt, le, lt, eq, ne)<br>
			yyy is threshold (integer or floating point)<br ?="">
			Examples: cnt_ge_0.01, pct_eq_100</td></tr>
	</tbody>
	</table>
</div>

<div id="smry_table" style="display: none;">
	<table class="codes">
	<caption>Column Summary Types</caption>
	<thead>
	<tr><th>Code  </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>max  </td><td>Maximum value for the column </td></tr>
	<tr><td>min  </td><td>Minimum value for the column </td></tr>
	<tr><td>sum  </td><td>Sum of values in the column </td></tr>
	<tr><td>mean </td><td>Average of values in the column </td></tr>
	<tr><td>cnt_xx_yyy </td><td>Count of number of values in column passing threshold </td></tr>
	<tr><td>pct_xx_yyy </td><td>Percent (integer) of values in column passing threshold </td></tr>
	<tr><td>fct_xx_yyy </td><td>Fraction (float) of values in columnn passing threshold </td></tr>
	<tr><td>run_xx_yyy </td><td>Consecutive column values passing threshold </td></tr>
	<tr><td> </td><td>xx is operator (ge, gt, le, lt, eq, ne)<br>
			yyy is threshold (integer or floating point)<br ?="">
			Examples: cnt_ge_0.01, run_le_32</td></tr>
	<tr><td colspan="2" style="text-align:center;">More than one smry code can be specified. </td></tr>
	</tbody>
	</table>
</div>

<div id="season_start_table" style="display: none;">
	<table class="codes">
	<caption>Season Start Description</caption>
	<thead>
	<tr><th>Description  </th><th>Examples</th></tr>
	</thead>
	<tbody>
	<tr><td>For interval of dly - month and day </td><td>[12,21] or 06-20</td></tr>
	<tr><td>For interval of mly - just month  </td><td>3 </td></tr>
	</tbody>
	</table>
</div>

<div id="maxmissing_table" style="display: none;">
	<table class="codes">
	<caption>Max Missing Option</caption>
	<thead>
	<tr><th>Description  </th></tr>
	</thead>
	<tbody>
	<tr><td>Integer value indicating the number missing daily values to allow before a reduction is reported as missing.</td></tr>
	</tbody>
	</table>
</div>

<div id="prec_table" style="display: none;">
	<table class="codes">
	<caption>Precision Option</caption>
	<thead>
	<tr><th>Description  </th></tr>
	</thead>
	<tbody>
	<tr><td>Integer value indicating the number of decimal places of precision displayed in the results for this element.</td></tr>
	</tbody>
	</table>
</div>

<div id="elems_keys_table" style="display: none;">
	<table class="codes">
	<caption>Elems Object Keywords</caption>
	<tbody><tr><th>Keyword </th><th>Value </th><th>Examples</th></tr>
	<tr><td>name     </td><td>Element code   </td><td>maxt, pcpn </td></tr>
	<tr><td>vX       </td><td>Var major or var major.minor   </td><td>1, 10.4 </td></tr>
	<tr><td>vN       </td><td>Var minor (must also specify <code>vX</code>)  </td><td>4 </td></tr>
	<tr><td>base </td><td>Base temperature for degree days </td><td>mly </td></tr>
	<tr><td>interval </td><td>dly (daily), mly (monthly), yly (yearly) or list </td><td>mly </td></tr>
	<tr><td>duration </td><td>dly (daily), mly (monthly), yly (yearly), mtd (month-to-date), std (season-to-date), ytd (year-to-date) or integer </td><td>mtd </td></tr>
	<tr><td>season_start </td><td>Season start date - only valid with duration of <code>std</code> </td><td>[12,21], 06-20 </td></tr>
	<tr><td rowspan="2">reduce   </td><td>Data summary or reduction type </td><td>sum, mean </td></tr>
	<tr><td>For cnt, pct or fct, append "_operator_threshold". <br>Valid operators are eq, le, lt, ge, gt, ne </td><td>cnt_lt_32, pct_ge_0.01 </td></tr>
	<tr><td>add  </td><td>Additional information to be appended.<br>Valid operators are f, t, i, v, n, s </td><td>t, f </td></tr>
	<tr><td>smry  </td><td>Column summary statistics </td><td>mean </td></tr>
	<tr><td>smry_only  </td><td>Return only summary values (1 for true) </td><td>1 </td></tr>
	<tr><td>normal  </td><td>Normals - valid options: 1 or "departure" </td><td>1 </td></tr>
	<tr><td>maxmissing  </td><td>Allowable number of missing values </td><td>5 </td></tr>
	<tr><td>prec  </td><td>Decimal places of precision of results </td><td>3 </td></tr>
	<tr><td>groupby </td><td>Group together days or months of data for a year</td><td>["year","06-01","08-31"]</td></tr>
	</tbody></table>
</div>

<div id="output_table" style="display: none;">
	<table class="codes">
	<caption>Output Options</caption>
	<thead>
	<tr><th>Code  </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>json  </td><td>JavaScript Object Notation (default) </td></tr>
	<tr><td>csv  </td><td>Comma-Separated Values (unavailable for some requests, such as those including "add", "smry" or "meta" and MultiStnData requests for a day range)  </td></tr>
	<tr><td>image  </td><td>png image only (only valid for GridData calls)</td></tr>
	</tbody>
	</table>
</div>

<div id="area_table" style="display: none;">
	<table class="codes">
	<caption>Area Codes</caption>
	<tbody><tr><th>Keyword  </th><th>Description </th><th>Examples</th></tr>
	<tr><td>county   </td><td>County FIPS code </td><td>09001 </td></tr>
	<tr><td>climdiv  </td><td>Climate division (2-digits or combined with state) </td><td>10, NY10 </td></tr>
	<tr><td>cwa      </td><td>NWS County Warning Area </td><td>BOI </td></tr>
	<tr><td>basin    </td><td>Drainage basin (8-digit HUC) </td><td>01080205 </td></tr>
	<tr><td>state    </td><td>One or more 2-letter state postal abbreviations  </td><td>AK </td></tr>
	<tr><td>bbox     </td><td>Bounding box in decimal degrees (W,S,E,N) </td><td>-90, 40, -88, 41</td></tr>
	</tbody></table>
</div>

<div id="state_table" style="display: none;">
	<table class="codes">
	<caption>State Description</caption>
	<thead>
	<tr><th>Description  </th><th>Examples</th></tr>
	</thead>
	<tbody>
	<tr><td>One or more 2-letter state postal codes </td><td>MO, KS</td></tr>
	</tbody>
	</table>
</div>

<div id="general_table" style="display: none;">
	<table class="codes">
	<caption>General Meta Keywords by Area</caption>
	<tbody><tr><th>Area </th><th> ID Type </th><th>Available Meta Keywords</th></tr>
	<tr><td>state    </td><td>Postal         </td><td>id, name, bbox, geojson, state</td></tr>
	<tr><td>county   </td><td>FIPS           </td><td>id, name, bbox, geojson, state</td></tr>
	<tr><td>climdiv  </td><td>Divison number </td><td>id, name, bbox, geojson, state</td></tr>
	<tr><td>cwa      </td><td>NWS CWA        </td><td>id, name, bbox, geojson</td></tr>
	<tr><td>basin    </td><td>8-digit HUC    </td><td>id, name, bbox, geojson</td></tr>
	</tbody></table>
</div>

<div id="date_table" style="display: none;">
	<table class="codes">
	<caption>Date Secifications</caption>
	<tbody><tr><th>Options</th><th>Example</th></tr>
	<tr><td>yyyy-mm-dd </td><td>2010-01-31 </td></tr>
	<tr><td>yyyymmdd </td><td>20100131 </td></tr>
	<tr><td>por (period of record) </td><td>por </td></tr>
	<tr><td colspan="2">Sometimes only yyyy or yyyymm required.</td></tr>
	</tbody></table>
</div>

<div id="bbox_table" style="display: none;">
	<table class="codes">
	<caption>Bounding Box Format</caption>
	<tbody><tr><th>Description </th><th>Example</th></tr>
	<tr><td>Bounds in decimal degrees (W, S, E, N); negative values for South latitude and West longitude </td><td>-90, 40, -88, 41</td></tr>
	</tbody></table>
</div>

<div id="grid_table" style="display: none;">
	<table class="codes">
	<caption>Grid Codes</caption>
	<tbody><tr><th>Code </th><th>Description</th><th>Area</th><th>Period</th></tr>
	<tr><td> 1</td><td>NRCC Interpolated</td><td>Continental US</td><td>1950-present</td></tr>
	<tr><td> 2</td><td>Multi-Sensor Precipitation Estimates</td><td>Continental US</td><td>2006-present</td></tr>
	<tr><td> 3</td><td>NRCC Hi-Res</td><td>East of Rockies</td><td>Temp: 1998-present<br>Pcpn: 2002-present</td></tr>
	<tr><td> 4-16</td><td>NARCCAP (to be deprecated) *</td><td>Continental US</td><td>1970-2000, 2040-2070</td></tr>
	<tr><td></td><td colspan="3">4: CRCM + NCEP (historical only)</td></tr>
	<tr><td></td><td colspan="3">5: CRCM + CCSM</td></tr>
	<tr><td></td><td colspan="3">6: CRCM + CGCM3</td></tr>
	<tr><td></td><td colspan="3">9: MM5I + NCEP (historical only)</td></tr>
	<tr><td></td><td colspan="3">10: MM5I + CCSM</td></tr>
	<tr><td></td><td colspan="3">11: RCM3 + NCEP (historical only)</td></tr>
	<tr><td></td><td colspan="3">12: RCM3 + CGCM3</td></tr>
	<tr><td></td><td colspan="3">13: RCM3 + GFDL</td></tr>
	<tr><td></td><td colspan="3">14: WRFG + NCEP (historical only)</td></tr>
	<tr><td></td><td colspan="3">15: WRFG + CCSM</td></tr>
	<tr><td></td><td colspan="3">16: WRFG + CGCM3</td></tr>
	<tr><td> 21</td><td><a href="http://www.prism.oregonstate.edu/" target="_blank">PRISM</a></td><td>Continental US</td><td>Daily: 1981-present<br>
	Monthly/Yearly: 1895-present</td></tr>
	<tr><td colspan="4">* Be aware of idiosyncrasies before using NARCCAP grid sets.</td></tr>
	</tbody></table>
</div>

<div id="loc_table" style="display: none;">
	<table class="codes">
	<caption>Location Format</caption>
	<tbody><tr><th>Description </th><th>Example</th></tr>
	<tr><td>Point location defined in decimal degrees (longitude, latitude); negative values for South latitude and West longitude </td><td>-77.7, 41.8</td></tr>
	</tbody></table>
</div>

<div id="area_reduce_table" style="display: none;">
	<table class="codes">
	<caption>Area Reduction Types</caption>
	<thead>
	<tr><th>Code  </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>aaaa_max  </td><td>Maximum grid value in area </td></tr>
	<tr><td>aaaa_min  </td><td>Minimum grid value in area </td></tr>
	<tr><td>aaaa_mean </td><td>Average of all grid values in the area </td></tr>
	<tr><td> </td><td>aaaa is area type ("county", "climdiv", "basin", "state")<br>
			Examples: county_max</td></tr>
	</tbody>
	</table>
</div>

<div id="groupby_table" style="display: none;">
	<table class="codes">
	<caption>Group By Types <b>(to be deprecated)</b></caption>
	<thead>
	<tr><th>Code  </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>year  </td><td>Results will be returned with all data for a year in a list. </td></tr>
	<tr><td>year, mm-dd, mm-dd  </td><td>Results will be returned with all daily data between specified start date and end date in a list identified 
	by ending year.</td></tr>
	<tr><td>year, mm, mm  </td><td>Monthly summarized data will be returned for all months between specified start month and end month in a list identified 
	by ending year.</td></tr>
	</tbody>
	</table>
</div>

<div id="units_table" style="display: none;">
	<table class="codes">
	<caption>Units Codes</caption>
	<thead>
	<tr><th>Code </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>degreeC </td><td>Temperatures degrees C.</td></tr>
	<tr><td>degreeF </td><td>Temperatures degrees F.</td></tr>
	<tr><td>degreeK </td><td>Temperatures degrees K.</td></tr>
	<tr><td>inch    </td><td>Precipitation inches.</td></tr>
	<tr><td>mm      </td><td>Precipitation millimeters.</td></tr>
	</tbody>
	</table>
</div>

<div id="type_table" style="display: none;">
	<table class="codes">
	<caption>Type Codes</caption>
	<thead>
	<tr><th>Code </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>png </td><td>png image </td></tr>
	</tbody>
	</table>
</div>

<div id="info_only_table" style="display: none;">
	<table class="codes">
	<caption>Info Only Codes</caption>
	<thead>
	<tr><th>Code </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>1 </td><td>Only information about the map is returned, not png image </td></tr>
	<tr><td>&nbsp;</td><td>If not specified, png image is returned in data portion of JSON object </td></tr>
	</tbody>
	</table>
</div>

<div id="proj_table" style="display: none;">
	<table class="codes">
	<caption>Projection Types</caption>
	<thead>
	<tr><th>Code </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>lcc </td><td>Lambert conformal conic (default) </td></tr>
	</tbody>
	</table>
</div>

<div id="overlays_table" style="display: none;">
	<table class="codes">
	<caption>Overlay Types</caption>
	<thead>
	<tr><th>Code </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>state  </td><td>State borders </td></tr>
	<tr><td>county </td><td>County borders </td></tr>
	<tr><td colspan="2">Line width and color can also be specified, separated by colons.<br>
	                  For example, ["state:1:red", "county:1:blue"]</td></tr>
	</tbody>
	</table>
</div>

<div id="interp_table" style="display: none;">
	<table class="codes">
	<caption>Interpolation Types</caption>
	<thead>
	<tr><th>Code </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>cspline </td><td>Cubic spline (default) </td></tr>
	<tr><td>none </td><td>No interpolation </td></tr>
	</tbody>
	</table>
</div>

<div id="cmap_table" style="display: none;">
	<table class="codes">
	<caption>Color Map Types</caption>
	<thead>
	<tr><th>Code </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>Blues </td><td>Shades of blue </td></tr>
	<tr><td>Reds </td><td>Shades of red </td></tr>
	<tr><td>jet </td><td>Blue to red </td></tr>
	<tr><td><i>etc.</i> </td><td>Other color maps as defined in <a href="http://matplotlib.sourceforge.net/mpl_examples/pylab_examples/show_colormaps.pdf">mapplotlib</a> </td></tr>
	</tbody>
	</table>
</div>

<div id="width_height_table" style="display: none;">
	<table class="codes">
	<caption>Width and Height Specifications</caption>
	<thead>
	<tr><th>Code </th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td><i>integer</i> </td><td>Specify either width or height of png image in pixels; only specify one or the other.</td></tr>
	</tbody>
	</table>
</div>

<div id="levels_table" style="display: none;">
	<table class="codes">
	<caption>Contour Level Specification</caption>
	<thead>
	<tr><th>Description</th><td>Example</td></tr>
	</thead>
	<tbody>
	<tr><td>Comma-separated list of contour levels </td><td>0,5,10,15,20</td></tr>
	<tr><td colspan="2" style="text-align:center;">Will be determined by server if not specified.</td></tr>
	</tbody>
	</table>
</div>

</div>

<div id="output" style="display: none;">
	<h2 id="jparams_h2">Parameters (JSON)</h2>
	<div id="jparams" contenteditable="true">Parameters will appear here.</div>
	<h2 id="jresults_h2"><span>Results</span> <button id="formatButton" class="otherButtons ui-corner-all ui-state-default">Format</button></h2>
	<div id="jresults">Results will appear here.</div>
</div>
<div style="clear:both;">

</div>
<!--<a href="http://hprcc-agron0.unl.edu/cornsoywater/public_html/web_services.php" target="_blank">Full documentation</a> -->

</div><div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-front ui-draggable ui-resizable" tabindex="-1" role="dialog" aria-describedby="infoDialog" aria-labelledby="ui-id-1" style="display: none; position: absolute;"><div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle"><span id="ui-id-1" class="ui-dialog-title">&nbsp;</span><button type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only ui-dialog-titlebar-close" role="button" title="Close"><span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">Close</span></button></div><div id="infoDialog" class="ui-dialog-content ui-widget-content"> </div><div class="ui-resizable-handle ui-resizable-n" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-e" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-s" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-w" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-sw" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-ne" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-nw" style="z-index: 90;"></div></div>

</body></html>